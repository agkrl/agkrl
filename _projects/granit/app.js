(()=>{"use strict";function t(){var t=this.first(),e=document.createElement("span");return e.classList.add("accordion__icon"),Array.from(t.children).forEach((function(t){var r=t.querySelector(".accordion-content"),n=t.querySelector(".accordion__title");r&&(n.appendChild(e),t.addEventListener("click",(function(r){e.classList.toggle("accordion__icon--down"),t.classList.toggle("active")})))})),this}function e(t){var e,r,n=this,i=t.hiddenSize,o=t.scrollSpeed,a=0,s=(e=function(t){a=window.scrollY,document.body.getBoundingClientRect().y<=-i?n.first().classList.remove("scrollup--hidden"):n.first().classList.add("scrollup--hidden")},250,r=null,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r||(r=setTimeout((function(){e.apply(void 0,n),clearTimeout(r),r=null}),250))});return window.addEventListener("scroll",s,{passive:!0}),this.first().addEventListener("click",(function(t){t.preventDefault();var e=setInterval((function(){window.scrollTo(0,a-=100),a<0&&clearInterval(e)}),o)})),this}function r(t){var e=this;return this.first().addEventListener("click",(function(r){e.first().classList.toggle("active"),t&&document.querySelector(t).classList.toggle("hidden")})),this}function n(t){var e,r=null!==(e=document.querySelector(t))&&void 0!==e?e:null;function n(){if(r){var t=r.querySelector(".modal-content");t.classList.remove("modal-content--animate");var e=setTimeout((function(){document.body.removeAttribute("style"),r.classList.remove("modal-open"),t.removeAttribute("style"),r.querySelector(".modal-close").removeEventListener("click",n),clearTimeout(e)}),250)}}return r.classList.contains("isClosable")&&r.addEventListener("click",(function(t){t.target.contains(r)&&n()})),{open:function(){if(r){var t=r.querySelector(".modal-content");r.classList.add("modal-open");var e=setTimeout((function(){document.body.style.overflow="hidden",t.classList.add("modal-content--animate"),r.querySelector(".modal-close").addEventListener("click",n),clearTimeout(e)}),0)}},close:n}}function i(t,e,r){var n=0,i=this.first();r&&i.style.setProperty("--progress-color",r);var o=setInterval((function(){n+=null!=e?e:1,i.style.setProperty("--progress","".concat(n,"%")),n!==Number(t)||clearInterval(o)}),16.667)}function o(t){for(var e=t.threshold,r=void 0===e?.1:e,n=t.ms,i=void 0===n?500:n,o=t.rootMargin,a=void 0===o?"0px":o,s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];var u={},f=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting&&t.target.id&&u[t.target.id]instanceof Function){var e=setTimeout((function(){u[t.target.id]("#".concat(t.target.id)),clearInterval(e)}),i);f.unobserve(t.target)}else{if(t.isIntersecting&&t.target.getAttribute("bg")){var r=t.target.getAttribute("bg");if(r){t.target.removeAttribute("bg");var n=setTimeout((function(){t.target.classList.add(r),f.unobserve(t.target),clearInterval(n)}),i)}}if("IMG"===t.target.tagName&&t.isIntersecting){var o=t.target.getAttribute("source");if(o){t.target.parentNode.classList.add("spinner"),t.target.removeAttribute("source");var a=setTimeout((function(){t.target.setAttribute("src",o),t.target.parentNode.classList.remove("spinner"),t.target.removeAttribute("style"),f.unobserve(t.target),clearInterval(a)}),i)}}}}))}),{root:document,rootMargin:a,threshold:r});return console.log(l),Array.from(l).filter((function(t,e){if(t instanceof Object){t=Object.keys(t)[0];var r=document.querySelectorAll(t);r.length>0&&r.forEach((function(r){r.id&&(u[r.id]=l[e][t],f.observe(r))}))}else{var n=document.querySelectorAll(t);n.length>0&&n.forEach((function(e){"img"===t&&(e.classList.contains("not-loader")||(e.style.visibility="hidden")),f.observe(e)}))}})),this}function a(t){var e=document.querySelector(t),r=this.first(),n=0,i=0;function o(t){var r=this.offsetXEnd;this.offsetXEnd=t.clientX;var o=this.offsetYEnd;this.offsetYEnd=t.clientY,10==n&&(n-=1),-10==n&&(n+=1),10==i&&(i-=1),-10==i&&(i+=1),r>this.offsetXEnd&&(n-=1,e.style.setProperty("--offsetX","".concat(n,"px"))),r<this.offsetXEnd&&(n+=1,e.style.setProperty("--offsetX","".concat(n,"px"))),o<this.offsetYEnd&&(i+=1,e.style.setProperty("--offsetY","".concat(i,"px"))),o>this.offsetYEnd&&(i-=1,e.style.setProperty("--offsetY","".concat(i,"px")))}r.addEventListener("mousemove",o),r.addEventListener("touchmove",o,{passive:!0})}function s(t){var e="",r=this.first(),n=null,i=null!=t?t:"+7(___)___-__-__",o=i[3];return r&&(r.addEventListener("focus",(function(t){0===t.target.value.length&&(t.target.value=e||i),t.target.value===i&&(t.target.selectionStart=1,t.target.selectionEnd=1,t.target.onselect=function(t){t.target.value!=i||t.target.setRangeText("",3,3,"start")}),e=t.target.value})),r.addEventListener("keydown",(function(t){n=t.key})),r.addEventListener("input",(function(t){if("Backspace"===n){if(e.length>3)return void(e=t.target.value);if(e.length<=3)return void(this.value="+7(")}if(t.target.value.match(/\+7[\d+]{10}/)){for(var r=t.target.value,i="",a=0;a<=r.length;a++)r[a]&&(i+=r[a]),1==a&&(i+="("),4==a&&(i+=")"),7==a&&(i+="-"),9==a&&(i+="-");t.target.value=i}else t.data.match(/\d+/g)?e.includes(o)?(e=e.replace(o,t.data),this.value=e):e.length<16?(0===e.length&&(e="+7("),6===e.length&&(e+=")"),10===e.length&&(e+="-"),13===e.length&&(e+="-"),e+=t.data,this.value=e):this.value=e:this.value="+7("}))),this}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:String(e)}var f,d=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._value=null,this._error=null}var e,r;return e=t,(r=[{key:"setValue",value:function(t){this._value=t}},{key:"isMaxLength",value:function(t){return this._value.length>t}},{key:"isMinLength",value:function(t){return this._value.length<t}},{key:"isRequired",value:function(){return 0!==this._value.length}},{key:"isPhone",value:function(){return"+7("===this._value?"start":!!this._value.match(/\+7\([\d+]{3}\)[\d+]{3}\-[\d+]{2}\-[\d+]{2}/g)}},{key:"isEmail",value:function(){return!!this._value.match(/([a-z1-9\_\-\.]+)\@([a-z]+)\.([a-z]+)/g)}},{key:"validate",value:function(t){var e=t.type,r=t.minLength,n=t.maxLength,i=t.required;return function(t){switch(this.setValue(t.target.value),this._error=null,e){case"phone":"start"===this.isPhone()?t.target.style.backgroundColor="white":this.isPhone()?this._error=null:this._error="Не корректный номер";break;case"email":var o=t.target.value[0],a=t.target.value[t.target.value.length-1];o&&!o.match(/[a-z0-9]/)?this._error="Введено некорректное имя ящика. Имя должно начиться на латинскую букву или цифру.":!this._error&&t.target.value.length<5?this._error="Введено некорректное имя ящика. Имя ящика должно быть длиной от 5 до 31 символов.":!this._error&&t.target.value.length>5&&(a&&!a.match(/[a-z]/)?this._error="Введено некорректное имя ящика. Имя должно заканчиваться на латинскую букву или цифру.":this._error=null)}r&&this.isMinLength(r)&&(this._error="Минимум ".concat(r)),n&&this.isMaxLength(n)&&(this._error="Максимум ".concat(n)),i&&this.isRequired()&&(this._error="Это поле обязательное"),this._error&&(this._renderError(t.target),t.target.style.backgroundColor="red",t.target.removeAttribute("valid")),this._error||(this._removeError(t.target),t.target.style.backgroundColor="green",t.target.setAttribute("valid",""))}.bind(d)}},{key:"_renderError",value:function(t){if(!t.parentNode.querySelector("span.error")){var e=document.createElement("span");e.classList.add("error","error--popup"),e.innerText=this._error,t.parentNode.appendChild(e)}}},{key:"_removeError",value:function(t){t.parentNode.querySelector("span.error")&&t.parentNode.querySelector("span.error").remove()}}])&&c(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function v(t){var e=d.validate.bind(this)(t);return this.element[0]&&(this.element[0].style.backgroundColor="white",this.element[0].addEventListener("input",e)),this}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.gap,r=void 0===e?40:e,n=t.minHeight,i=void 0===n?300:n,o=t.containerSize,a=void 0===o?3:o,s=document.getElementById("carousel-left"),l=document.getElementById("carousel-right"),c=document.getElementById("carousel-content"),u=document.querySelectorAll(".carousel-content-item"),f=c.querySelector("div.image").clientWidth,d=c.children.length,v=(f+r)*d,h=a;return u.length>0&&u.forEach((function(t){t.style.minWidth="".concat(100/a,"%"),t.style.minHeight="".concat(i,"px")})),s&&s.addEventListener("click",(function(t){t.preventDefault(),c.scrollLeft-=f,(h-=1)<a&&(c.scrollLeft=v,h=d)})),l&&l.addEventListener("click",(function(t){t.preventDefault(),c.scrollLeft+=f,(h+=1)>d&&(c.scrollLeft=0,h=a)})),this}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==g(a)?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}f=function(l){var c={};return function(l){return this.element=document.querySelectorAll(l),y(y(y(y({},c),{accordion:t,scrollup:e,hamburger:r,modal:n,circle:i,intersection:o,parallax:a,validate:v,mask:s,carousel:h}),{click:u,submit:f}),{css:g,toggle:m,append:p,first:b,attr:d})}.bind(c)(l);function u(t){var e=this;return this.first().addEventListener("click",(function(r){t&&t.bind(e)(r)})),this}function f(t){var e=this;return this.first().addEventListener("submit",(function(r){t&&t.bind(e)(r)})),this}function d(t){return this.first().getAttribute(t)}function g(t){for(var e in t)this.first().style[e]=t[e]}function m(t){this.first().classList.toggle(t)}function p(t){this.first().appendChild(t)}function b(){return this.element[0]}},o({},"section[bg]","img"),f("#h-menu").hamburger(".menu"),f("#call").click((function(t){t.preventDefault(),this.modal("#modal-call").open()})),f("#scrollup").scrollup({hiddenSize:document.querySelector(".header").clientHeight,scrollSpeed:5})})();